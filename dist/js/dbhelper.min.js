class DBHelper{static get DATABASE_URL(){return"http://localhost:1337/restaurants"}static fetchRestaurants(t){if(!("indexedDB"in window)){console.log("IndexedDB is not supported on this browser");let e=new XMLHttpRequest;return e.open("GET",DBHelper.DATABASE_URL),e.onload=(()=>{if(200===e.status){const a=JSON.parse(e.responseText);t(null,a)}else{const a=`Request failed. Returned status of ${e.status}`;t(a,null)}}),void e.send()}idb.open("restaurants",1,function(t){t.createObjectStore("restaurants",{keyPath:"id"})}).then(function(e){e.transaction("restaurants","readonly").objectStore("restaurants").getAll().then(a=>{if(a&&a.length>0)t(null,a);else{let a=new XMLHttpRequest;a.open("GET",DBHelper.DATABASE_URL),a.onload=(()=>{if(200===a.status){var n=e.transaction("restaurants","readwrite").objectStore("restaurants");JSON.parse(a.responseText).forEach(t=>{n.put(t)}),n.getAll().then(e=>{t(null,e)})}else{const e=`Request failed. Returned status of ${a.status}`;t(e,null)}}),a.send()}})})}static fetchRestaurantById(t,e){DBHelper.fetchRestaurants((a,n)=>{if(a)e(a,null);else{const a=n.find(e=>e.id==t);a?e(null,a):e("Restaurant does not exist",null)}})}static fetchRestaurantByCuisine(t,e){DBHelper.fetchRestaurants((a,n)=>{if(a)e(a,null);else{const a=n.filter(e=>e.cuisine_type==t);e(null,a)}})}static fetchRestaurantByNeighborhood(t,e){DBHelper.fetchRestaurants((a,n)=>{if(a)e(a,null);else{const a=n.filter(e=>e.neighborhood==t);e(null,a)}})}static fetchRestaurantByCuisineAndNeighborhood(t,e,a){DBHelper.fetchRestaurants((n,s)=>{if(n)a(n,null);else{let n=s;"all"!=t&&(n=n.filter(e=>e.cuisine_type==t)),"all"!=e&&(n=n.filter(t=>t.neighborhood==e)),a(null,n)}})}static fetchNeighborhoods(t){DBHelper.fetchRestaurants((e,a)=>{if(e)t(e,null);else{const e=a.map((t,e)=>a[e].neighborhood),n=e.filter((t,a)=>e.indexOf(t)==a);t(null,n)}})}static fetchCuisines(t){DBHelper.fetchRestaurants((e,a)=>{if(e)t(e,null);else{const e=a.map((t,e)=>a[e].cuisine_type),n=e.filter((t,a)=>e.indexOf(t)==a);t(null,n)}})}static urlForRestaurant(t){return`./restaurant.html?id=${t.id}`}static imageUrlForRestaurant(t){return`/img/${t.id}.jpg`}static mapMarkerForRestaurant(t,e){return new google.maps.Marker({position:t.latlng,title:t.name,url:DBHelper.urlForRestaurant(t),map:e,animation:google.maps.Animation.DROP})}static altForImage(t){return"/img/1.jpg"===t?" Restaurant, classical indoor decoration":"/img/2.jpg"===t?" Restaurant, pizza on a plate":"/img/3.jpg"===t?" Restaurant, modern indoor wood decoration":"/img/4.jpg"===t?" Restaurant, usual outdoor neon decoration":"/img/5.jpg"===t?" Restaurant, crowded, industrial interior":"/img/6.jpg"===t?" Restaurant, spacious, american interior design":"/img/7.jpg"===t?" Restaurant, small premise, unordinary exterior":"/img/8.jpg"===t?" Restaurant, classical outdoor decoration":"/img/9.jpg"===t?" Restaurant, asian dinnerwear":"/img/10.jpg"===t?" Restaurant, minimalist interior design":void 0}}